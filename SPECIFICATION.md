# Техническое задание на позицию Frontend-разработчика

## Введение

Данное техническое задание описывает требования к разработке веб-приложения для работы с системой ставок. Приложение должно обеспечить удобный пользовательский интерфейс для взаимодействия с предоставленным API, реализовывать авторизацию, управление балансом, размещение ставок и отслеживание результатов.

## Технический стек

- **Frontend Framework**: Next.js (версия 14 или 15)
- **Язык программирования**: TypeScript
- **UI-библиотека**: На ваш выбор (shadcn/ui, Ant Design, MUI, Chakra UI)
- **Стилизация**: Tailwind CSS
- **State Management**: На выбор разработчика (рекомендовано: Redux Toolkit, Zustand, MobX)
- **API-взаимодействие**: SWR или React Query
- **Архитектура**: Feature Slice Design (FSD)

## Описание API

API доступно по адресу: [https://bet-provider.coolify.tgapps.cloud](https://bet-provider.coolify.tgapps.cloud)
Документация Swagger: [https://bet-provider.coolify.tgapps.cloud/api/docs](https://bet-provider.coolify.tgapps.cloud/api/docs)

### Основные эндпоинты API:

- `GET /api/health` - проверка работоспособности API
- `POST /api/auth` - авторизация пользователя
- `POST /api/balance` - установка/получение баланса
- `GET /api/bet` - получение рекомендуемой ставки
- `POST /api/bet` - размещение ставки
- `POST /api/win` - получение результата ставки
- `POST /api/check-balance` - проверка корректности баланса

## Функциональные требования

### 1. Аутентификация и безопасность (20 баллов)

#### 1.1. Авторизация
- Создать страницу входа с полем для ввода User ID и выбора пользователя из предоставленного списка.
- Реализовать механизм хранения авторизационных данных (user-id и secret_key) в безопасном хранилище (localStorage/cookies с учетом безопасности).
- После успешной авторизации перенаправлять пользователя на главную страницу приложения.

#### 1.2. Формирование подписи
- Реализовать утилиту для генерации HMAC SHA-512 подписи с использованием secret_key пользователя.
- Подпись должна формироваться на основе тела запроса в формате JSON-строки.
- Создать интерцептор или middleware для автоматического добавления заголовков `user-id` и `x-signature` ко всем исходящим запросам к API.

#### 1.3. Защита маршрутов
- Реализовать механизм защиты маршрутов от неавторизованного доступа.
- Перенаправлять неавторизованных пользователей на страницу входа.
- Обеспечить сохранение состояния авторизации при обновлении страницы.

### 2. Управление балансом (15 баллов)

#### 2.1. Отображение баланса
- Создать компонент для отображения текущего баланса пользователя.
- Реализовать функцию автоматического обновления баланса после каждой ставки/выигрыша.
- Обеспечить визуальную индикацию изменения баланса (анимация, подсветка).

#### 2.2. Установка начального баланса
- Создать форму для установки начального баланса, если он еще не задан.
- Добавить валидацию вводимых значений (только положительные числа).
- Отображать соответствующие уведомления об успешной установке баланса или ошибках.

#### 2.3. Проверка баланса
- Реализовать функцию проверки соответствия ожидаемого и фактического баланса.
- Отображать результат проверки с детальной информацией о расхождениях.
- Включить функцию автоматической синхронизации при обнаружении расхождений.

### 3. Интерфейс ставок (25 баллов)

#### 3.1. Рекомендуемая ставка
- Создать компонент для запроса и отображения рекомендуемой ставки от API.
- Добавить возможность быстрого использования рекомендуемой ставки.
- Реализовать обновление рекомендации по запросу пользователя.

#### 3.2. Форма размещения ставки
- Создать форму для ввода суммы ставки с валидацией (от 1 до 5).
- Добавить визуальную индикацию доступности размещения ставки (достаточность средств).
- Реализовать обработку различных ошибок при размещении ставки.

#### 3.3. История ставок
- Создать компонент для отображения истории ставок пользователя.
- Обеспечить фильтрацию и сортировку ставок по различным параметрам.
- Реализовать визуальное отличие статусов ставок (ожидание, выигрыш, проигрыш).
- Сохранять историю ставок в локальном хранилище для доступа после обновления страницы.

### 4. Результаты ставок (15 баллов)

#### 4.1. Получение результата
- Создать механизм запроса результата для конкретной ставки.
- Реализовать отображение результата в виде модального окна или уведомления.
- Обеспечить автоматическое обновление баланса после получения результата.

#### 4.2. Анимация результата
- Добавить анимацию при отображении результата (выигрыш/проигрыш).
- Реализовать звуковые эффекты для различных результатов (при наличии разрешения пользователя).

#### 4.3. Статистика
- Создать компонент статистики с информацией о выигрышах/проигрышах.
- Реализовать визуализацию статистики в виде графиков или диаграмм.
- Обеспечить фильтрацию статистики по временным периодам.

### 5. Пользовательский интерфейс (15 баллов)

#### 5.1. Общий дизайн
- Реализовать отзывчивый дизайн для мобильных и десктопных устройств.
- Обеспечить согласованность UI-элементов и цветовой схемы.
- Добавить темную и светлую темы с возможностью переключения.

#### 5.2. Компоненты и анимации
- Создать набор переиспользуемых UI-компонентов (кнопки, поля ввода, карточки).
- Добавить анимации для переходов между страницами.
- Реализовать скелетон-загрузку при ожидании ответа от API.

#### 5.3. Уведомления
- Создать систему уведомлений для информирования пользователя о результатах действий.
- Реализовать различные типы уведомлений (ошибка, предупреждение, успех).
- Обеспечить возможность сворачивания или закрытия уведомлений.

### 6. Архитектура и код (10 баллов)

#### 6.1. Feature Slice Design
- Строго придерживаться архитектуры Feature Slice Design.
- Организовать код по фичам: авторизация, баланс, ставки, результаты.
- Обеспечить четкое разделение слоев: ui, model, api.

#### 6.2. Типизация
- Обеспечить полное покрытие кода типами TypeScript.
- Создать интерфейсы для всех данных, получаемых от API.
- Использовать дженерики для переиспользуемых компонентов.

#### 6.3. Управление состоянием
- Реализовать эффективное управление глобальным состоянием приложения.
- Обеспечить оптимальное обновление компонентов при изменении состояния.
- Использовать локальное состояние для независимых компонентов.

## Дополнительные требования и рекомендации

### Обработка ошибок
- Создать централизованную систему обработки ошибок.
- Реализовать специфические обработчики для различных типов ошибок API.
- Отображать пользователю понятные сообщения об ошибках.

### Производительность
- Минимизировать количество запросов к API с помощью кеширования.
- Использовать виртуализацию для отображения больших списков (история ставок).
- Реализовать ленивую загрузку компонентов для оптимизации первоначальной загрузки.

### Тестирование
- Добавить модульные тесты для ключевых функций (формирование подписи, валидация форм).
- Реализовать тесты для компонентов с использованием React Testing Library.
- По возможности, добавить e2e-тесты для основных пользовательских сценариев.

### Документация
- Добавить JSDoc-комментарии для ключевых функций и компонентов.
- Создать README с инструкциями по установке, настройке и запуску проекта.
- Описать основные архитектурные решения и используемые подходы.

## Дизайн-референс

В качестве референса можно использовать дизайн-макет, доступный по ссылке: [https://app.uizard.io/p/a3fa58eb](https://app.uizard.io/p/a3fa58eb). Соответствие референсу не является обязательным, но рекомендуется сохранять общую стилистику и компоновку элементов.

## Последовательность взаимодействия с API

Для корректной работы с API необходимо соблюдать следующую последовательность запросов:

1. Авторизация (`/api/auth`)
2. Установка начального баланса (`/api/balance` с телом запроса)
3. Получение ставки (`/api/bet` GET)
4. Размещение ставки (`/api/bet` POST)
5. Получение результата (`/api/win`)
6. Получение обновленного баланса (`/api/balance` без тела)
7. Проверка корректности баланса (`/api/check-balance`)

## Критерии оценки (100 баллов)

### Основные критерии
- **Аутентификация и безопасность** - 20 баллов
- **Управление балансом** - 15 баллов
- **Интерфейс ставок** - 25 баллов
- **Результаты ставок** - 15 баллов
- **Пользовательский интерфейс** - 15 баллов
- **Архитектура и код** - 10 баллов

### Бонусные баллы (до 10 дополнительных баллов)
- Реализация анимаций и переходов (+3 балла)
- Дополнительные визуализации статистики (+2 балла)
- Оптимизация производительности (+2 балла)
- Покрытие кода тестами (+3 балла)

## Результат выполнения задания

Результатом выполнения задания должны быть:

1. **Репозиторий кода**:
   - Исходный код проекта, размещённый на GitHub или GitLab.
   - Структура проекта должна соответствовать архитектуре Feature Slice Design.
   - Все зависимости должны быть указаны в package.json.

2. **Документация**:
   - Инструкция по установке и запуску проекта в файле README.md.
   - Описание основных архитектурных решений и используемых подходов.
   - Краткая документация по созданным компонентам и функциям.

3. **Демонстрация**:
   - Скриншоты ключевых экранов приложения.
   - Запись экрана с демонстрацией основного пользовательского сценария:
     - Авторизация
     - Установка баланса
     - Получение рекомендуемой ставки
     - Размещение ставки
     - Получение результата
     - Проверка баланса
   - По возможности, опубликованное демо приложения на Vercel, Netlify или аналогичном сервисе.